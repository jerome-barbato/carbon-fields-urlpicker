(()=>{"use strict";var e={594:e=>{e.exports=cf.vendor["@wordpress/element"]}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(()=>{const e=cf.core;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){var r=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===t(r)?r:String(r)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(594),p=jQuery,f=function(){return new Promise((function(e,t){p("#wp-link-wrap").length?e():p.get(ajaxurl,{action:"carbonfields_urlpicker_get_tinymce_popup"},(function(t){p("#wpfooter").after(t),wpLink.init(),e()}))}))},s=function(e,t,r){var n="dummy-".concat(t),o=p("<textarea />",{id:n,style:"height: 0; width: 0; position: absolute; left: -9999px"});function i(e){p("#wp-link-text").val(p(e.currentTarget).find(".item-title").text())}return o.insertAfter(e),wpLink.setDefaultValues=function(){p("#wp-link-url").val(r.url),p("#wp-link-text").val(r.anchor),p("#wp-link-target").prop("checked",!!r.blank)},wpLink.open(n),p("#search-results, #most-recent-results").on("click.carbon-fields-urlpicker","li",i),new Promise((function(e,t){o.one("change",(function(t,r){var n={url:p("#wp-link-url").val(),anchor:p("#wp-link-text").val(),blank:p("#wp-link-target").prop("checked")?1:0};wpLink.setDefaultValues=function(){p("#wp-link-url").val(""),p("#wp-link-text").val(""),p("#wp-link-target").prop("checked",!1)},p("#search-results, #most-recent-results").off("click.carbon-fields-urlpicker","li",i),e(n)}))}))},b=r(594);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(r){var c=l(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}(this,n)}}const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(a,e);var t,r,n,l=d(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return u(i(e=l.call.apply(l,[this].concat(r))),"resetFieldValues",(function(t){t.preventDefault();var r=e.props,n=(r.field,r.id);e.props.onChange(n,{url:"",anchor:"",blank:""})})),u(i(e),"openUrlPicker",(function(t){var r=t.currentTarget,n=e.props.id,o=e.props.value||e.props.field.value;return f().then((function(){return s(r,n,o)})).then((function(t){return e.props.onChange(n,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t))})),!1})),u(i(e),"getButton",(function(){var t=e.props.value||e.props.field.value;return t.url.length>0?b.createElement("span",{className:"carbon-fields--urlpicker","data-is-blank":t.blank?1:0},b.createElement("span",{onClick:e.openUrlPicker.bind(i(e))},b.createElement("strong",null,t.url.replace("".concat(carbonFieldsUrlpickerL10n.home_url),"")),b.createElement("br",null),b.createElement("small",null,b.createElement("em",null,t.anchor))),b.createElement("span",{className:"carbon-fields--urlpicker__remove",onClick:e.resetFieldValues.bind(i(e)),title:carbonFieldsUrlpickerL10n.remove_link},"Ã—")):b.createElement("span",{className:"button button-secondary",onClick:e.openUrlPicker.bind(i(e))},carbonFieldsUrlpickerL10n.select_link)})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props,t=(e.id,e.name),r=e.value;return e.field,b.createElement("div",null,this.getButton(),b.createElement("input",{name:"".concat(t,"[url]"),value:r.url,type:"hidden",readOnly:!0}),b.createElement("input",{name:"".concat(t,"[anchor]"),value:r.anchor,type:"hidden",readOnly:!0}),b.createElement("input",{name:"".concat(t,"[blank]"),value:r.blank?1:0,type:"hidden",readOnly:!0}))}}])&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.Component);(0,e.registerFieldType)("urlpicker",v)})()})();